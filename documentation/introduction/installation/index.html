<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Installing Quartermaster - Quartermaster - Documentation</title>
<meta name="description" content="QMSTR creates an integrated Open Source toolchain that implements industry best practises of license compliance management.">
<meta name="generator" content="Hugo 0.55.0" />
<link href="https://qmstr.org/documentationindex.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://qmstr.org/documentation/introduction/installation/">
<link rel="stylesheet" href="https://qmstr.org/documentation/css/theme.min.css">


<link rel="stylesheet" href="https://qmstr.org/documentationcss/qmstr.css">


<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://qmstr.org/documentation/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://qmstr.org/documentation/js/functions.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<script src="https://qmstr.org/documentation/js/jquery.backtothetop/jquery.backtothetop.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-40601155-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-40601155-2');
</script>
</head>
<body>
<div class="container"><header>
<h1>Quartermaster - Documentation</h1>

<p class="description">QMSTR creates an integrated Open Source toolchain that implements industry best practises of license compliance management.</p>

</header>
<div class="menu">
<nav>
<ul>
<li><a href="https://qmstr.org/documentation/">Documentation</a></li>
<li><a href="https://qmstr.org">Main Website</a></li>
<li><a href="https://github.com/QMSTR">Repositories</a></li>
<li><a href="https://twitter.com/fosscompliance">Twitter</a></li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>Installing Quartermaster</h1>

<p>A Quartermaster installation consists of a client and a master side
part. The client side builds the software under inspection, and
collects information about the objects that are being built. It
transmits that information to the master which performs the analysis
and creates the output artifacts (reports). The client side uses
programs native to the build environment. The master side always runs
in a containerized Linux system. To run the master, the master
container image needs to be available on the system where <code>qmstrctl
start</code> is called. Other build slaves or distributed compile nodes only
need the client side programs, since the master only runs once per
build.</p>

<p>The core modules and tools of Quartermaster are written in the Go
programming language. However it is not primarily a Go
project. Modules may be written in any programming language that
provides GRPC bindings. They are usually written in the language of
the tools they integrate with. The SPDX parser module, for example, is
written in Python. The Gradle integration is written in Java. The
Quartermaster build system uses a Makefile to implement the different
steps required to build these modules in their specific ways.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>The qmstr master server is supposed to run in a container therefore Docker is needed to be installed on the host system.</p>

<h3 id="host-machine-preparation">Host machine preparation</h3>

<p>Install the depencencies:</p>

<ul>
<li><p>If you are running an Ubuntu machine:</p>

<blockquote>
<p>sudo apt update</p>

<p>sudo apt install golang protobuf-compiler</p>
</blockquote>

<ul>
<li>Install Docker: <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a></li>
</ul></li>

<li><p>If you are running a Fedora machine:</p>

<blockquote>
<p>sudo dnf install golang protobuf-compiler</p>
</blockquote></li>

<li><p>Install Docker: <a href="https://docs.docker.com/install/linux/docker-ce/fedora/">https://docs.docker.com/install/linux/docker-ce/fedora/</a></p></li>
</ul>

<p>Add user to the docker group:
  - Create new group if it does not exist.</p>

<blockquote>
<p>sudo groupadd docker</p>
</blockquote>

<ul>
<li>Add current user to the group</li>
</ul>

<blockquote>
<p>sudo gpasswd -a $USER docker</p>
</blockquote>

<ul>
<li>Reload shell. For that log out and log back or execute the next command:</li>
</ul>

<blockquote>
<p>newgrp docker</p>
</blockquote>

<p>More information in:
  <a href="https://linoxide.com/linux-how-to/use-docker-without-sudo-ubuntu/">https://linoxide.com/linux-how-to/use-docker-without-sudo-ubuntu/</a></p>

<p>Install the <code>protoc</code> Protobuf compiler:<sup class="footnote-ref" id="fnref:gopath-deprecation"><a href="#fn:gopath-deprecation">1</a></sup></p>

<pre><code>&gt; protoc --version
...
</code></pre>

<h2 id="checkout-sources">Checkout sources</h2>

<blockquote>
<p>git clone <a href="https://github.com/QMSTR/qmstr.git">https://github.com/QMSTR/qmstr.git</a></p>
</blockquote>

<h2 id="installing-the-clients">Installing the clients</h2>

<p>The main entry point into the installation tasks for Quartermaster is
the Makefile in the main repository. The default installation prefix is <code>/usr/local</code>.
The client programs will be installed into the <code>bin/</code> subdirectory:</p>

<pre><code>&gt; make install_qmstr_client
...
</code></pre>

<p>Depending on the specifics of the local setup, a developer may want to
install the binaries to a different location. The location can be specified in the
<em>PREFIX</em> variable of the Makefile invocation:</p>

<blockquote>
<p>make PREFIX=/opt/qmstr install_qmstr_client</p>
</blockquote>

<p>If the installation completes successfully, the <code>qmstrctl</code> command is
now available:</p>

<pre><code>&gt; qmstrctl version
This is qmstrctl version 0.4
</code></pre>

<p>Only the client side installation and the information about how to
access the master are required on a system that builds software with
Quartermaster instrumentation. All tools and programs required to
perform analysis and create reports are included in the master
container.</p>

<p>For other make targets, inspect the Makefile.</p>

<h2 id="master-installation">Master installation</h2>

<p>The master process runs as a container. The Dockerfile to build the
container resides in the main Quartermaster repository. The
Quartermaster project does not provide ready-made images in a
container repository, the images have to be built on or made available
to the systems that are supposed to run the master. This may change at
a later time, however at the moment it is the only mechanism to
prepare to run the master.</p>

<p>To create the master image, run make again:</p>

<pre><code>&gt; make master
...
</code></pre>

<p>This may take a while. It will build the master container, including
all Quartermaster modules and install the dependencies and tools that
are used for analysis. Once the images have been created, <code>qmstrctl</code>
can be used to start and manage the master process.</p>

<h2 id="summary">Summary</h2>

<p>Every system that builds parts of your software (build slave,
executor, your CI may call the build clients in a different way) needs
to have the Quartermaster client tools installed. The easiest way to
ensure that is usually to include the instructions to install the
client programs in the automated setup of the build slaves. The master
only needs to run once per build process, even if parallel build
processes are used that deploy build jobs to a number of build
clients. In most scenarios, the master images need to be built on the
machine where the software build is started.</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:gopath-deprecation"><p>Older versions of the documentation contained references to $GOPATH
and recommendations to install programs into $GOPATH/bin. Since QMSTR 0.4,
GOPATH is not used anymore. The Makefiles instead expect that program
dependencies like <em>protoc</em> to be found in the PATH.</p>
 <a class="footnote-return" href="#fnref:gopath-deprecation"><sup>[return]</sup></a></li>
</ol>
</div>
<div class="edit-meta">Last updated on 1 Jan 0001
<br></div><nav class="pagination"><a class="nav nav-prev" href="https://qmstr.org/documentation/introduction/why-qmstr/" title="Why QMSTR?"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - Why QMSTR?</a>
<a class="nav nav-next" href="https://qmstr.org/documentation/introduction/getting-started/" title="Getting started">Next - Getting started <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer></footer>
</main><div class="sidebar">
<nav>
<ul>
<li class=""><a href="https://qmstr.org/documentation">Home</a></li>

<li class="parent"><a href="https://qmstr.org/documentation/introduction/">Introduction</a>
<ul class="sub-menu">
<li class=""><a href="https://qmstr.org/documentation/introduction/what-is-qmstr/">What is QMSTR?</a></li>
<li class=""><a href="https://qmstr.org/documentation/introduction/why-qmstr/">Why QMSTR?</a></li>

<li class="parent active"><a href="https://qmstr.org/documentation/introduction/installation/">Installing Quartermaster</a>
</li>

<li class=""><a href="https://qmstr.org/documentation/introduction/getting-started/">Getting started</a>
<ul class="">

<li class=""><a href="https://qmstr.org/documentation/introduction/getting-started/debian-curl_tutorial/">Debian cURL tutorial</a>
</li>

<li class=""><a href="https://qmstr.org/documentation/introduction/getting-started/json-c_tutorial/">JSON-C tutorial</a>
</li>
</ul>
  
</li>
</ul>
  
</li>

<li class=""><a href="https://qmstr.org/documentation/qmstr-basics/">Quartermaster Basics</a>
<ul class="">

<li class=""><a href="https://qmstr.org/documentation/qmstr-basics/qmstr-cli/">Managing Nodes</a>
<ul class="">

<li class=""><a href="https://qmstr.org/documentation/qmstr-basics/qmstr-cli/database_cmds/">Database commands</a>
<ul class="">

<li class=""><a href="https://qmstr.org/documentation/qmstr-basics/qmstr-cli/database_cmds/create/">Create command</a>
</li>

<li class=""><a href="https://qmstr.org/documentation/qmstr-basics/qmstr-cli/database_cmds/describe/">Describe command</a>
</li>

<li class=""><a href="https://qmstr.org/documentation/qmstr-basics/qmstr-cli/database_cmds/delete/">Delete command</a>
</li>
</ul>
  
</li>
</ul>
  
</li>

<li class=""><a href="https://qmstr.org/documentation/qmstr-basics/connections/">Connections between nodes</a>
</li>
<li class=""><a href="https://qmstr.org/documentation/qmstr-basics/labels/">Node labels in Quartermaster</a></li>
</ul>
  
</li>

<li class=""><a href="https://qmstr.org/documentation/configuration/">Configuration</a>
</li>

<li class=""><a href="https://qmstr.org/documentation/developer/">For Developers</a>
<ul class="">
<li class=""><a href="https://qmstr.org/documentation/developer/how-to-participate/">How to participate</a></li>
<li class=""><a href="https://qmstr.org/documentation/developer/dev-environment/">Development environment</a></li>
</ul>
  
</li>

<li class=""><a href="https://qmstr.org/documentation/reference/">Command line reference</a>
<ul class="">
<li class=""><a href="https://qmstr.org/documentation/reference/qmstr/">qmstr</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstr_dev-generate-reference/">qmstr dev-generate-reference</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstr_run/">qmstr run</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstr_validate/">qmstr validate</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl/">qmstrctl</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_add-graph/">qmstrctl add-graph</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_analyze/">qmstrctl analyze</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_clean/">qmstrctl clean</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_connect/">qmstrctl connect</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_copy/">qmstrctl copy</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_create/">qmstrctl create</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_create_file/">qmstrctl create file</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_create_package/">qmstrctl create package</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_create_project/">qmstrctl create project</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_delete/">qmstrctl delete</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_describe/">qmstrctl describe</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_dev-generate-reference/">qmstrctl dev-generate-reference</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_disconnect/">qmstrctl disconnect</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_logs/">qmstrctl logs</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_quit/">qmstrctl quit</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_report/">qmstrctl report</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_snapshot/">qmstrctl snapshot</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_spawn/">qmstrctl spawn</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_start/">qmstrctl start</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_status/">qmstrctl status</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_update/">qmstrctl update</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_update_file/">qmstrctl update file</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_update_package/">qmstrctl update package</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_update_project/">qmstrctl update project</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_version/">qmstrctl version</a></li>
<li class=""><a href="https://qmstr.org/documentation/reference/qmstrctl_wait/">qmstrctl wait</a></li>
</ul>
  
</li>

<li class=""><a href="https://qmstr.org/documentation/wip/">Work in progress</a>
<ul class="">

<li class=""><a href="https://qmstr.org/documentation/wip/android-support/">Support for Android Application (apk) builds</a>
</li>

<li class=""><a href="https://qmstr.org/documentation/wip/validation/">The QMSTR Validator</a>
</li>

<li class=""><a href="https://qmstr.org/documentation/wip/self-contained-modules/">Towards self-contained modules</a>
</li>
</ul>
  
</li>
</ul>
</nav>


<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
